(this.webpackJsonpcovidfront=this.webpackJsonpcovidfront||[]).push([[0],{329:function(e,t,a){e.exports=a(497)},334:function(e,t,a){},335:function(e,t,a){},359:function(e,t,a){},497:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(212),i=a.n(r),s=(a(334),a(335),a(31)),l=a(19),c=a(16),d=a(153),m=a(154),u=a(25),h=a.n(u),p=a(284),f=a(214),v=a.n(f),g=a(285),y=a.n(g);function E(e,t){return Math.round(Math.abs((e-t)/864e5))}function D(e){var t=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),[a,t,n].join("/")}function b(e,t){var a=new Date(e.valueOf());return a.setDate(a.getDate()+t),a}var C={lastUpdate:{color:"#949494",fontSize:".6em"},cityName:{fontSize:"1em"},dataValue:{color:"#3b3b3b",fontSize:".9em"}},w=function(e){var t=e.name,a=e.state,n=e.date,r=e.cases,i=e.deaths;return o.a.createElement("div",{className:"cityListItem"},o.a.createElement("span",{style:C.lastUpdate},"\xdaltima atualiza\xe7\xe3o ",D(n)),o.a.createElement("br",null),o.a.createElement("span",{style:C.cityName},o.a.createElement("b",null,t,"/",a)),o.a.createElement("br",null),o.a.createElement("span",{style:C.dataValue},o.a.createElement("b",null,"Casos:")," ",r),o.a.createElement("span",null," | "),o.a.createElement("span",{style:C.dataValue},o.a.createElement("b",null,"\xd3bitos:")," ",i))};a(339);var S={MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiYWVzdCIsImEiOiJjazk1ejE3MnEwZzh4M2dwMndkMHhvZTQwIn0.kNcRxl_xTpzuf_vwz9_MtQ",BACKEND_URL:"https://cvid19-back.herokuapp.com",MAPBOX_ACCESS_TOKEN_LIST:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(e)return e.split(t)}(Object({NODE_ENV:"production",PUBLIC_URL:"/covid19-br-vis-front",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiYWVzdCIsImEiOiJjazk1ejE3MnEwZzh4M2dwMndkMHhvZTQwIn0.kNcRxl_xTpzuf_vwz9_MtQ",REACT_APP_BACKEND_URL:"https://cvid19-back.herokuapp.com"}).MAPBOX_ACCESS_TOKEN_LIST)},k=a(145),O=a(155);a(359);function P(){return o.a.createElement("div",null,o.a.createElement("div",{className:"spinner"}," "))}function x(e){var t=e.loading,a=e.text,n=e.style;return o.a.createElement("div",{style:Object(O.a)({},n),className:t?"loadingVisible":"loadingInvisible"},t&&o.a.createElement("div",{className:"opacityLoaderText"},o.a.createElement(P,null),a&&o.a.createElement("span",null,a)))}v.a.accessToken=S.MAPBOX_ACCESS_TOKEN;var M=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).renderCityListItem=function(e,t){var a=n.state.listableCities[e];return o.a.createElement(w,{name:a.city,state:a.state,date:new Date(a.date),cases:a.totalCases,deaths:a.deaths,key:t})},n.onSliderChangeEndedAsync=function(){var e=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=b(n.state.initialDate,parseInt(t)),n.state.map.setFilter("covid-heatmap",["<=",["number",["get","timestamp"]],a.getTime()]),n.state.map.setFilter("covid-heatmap-death",["<=",["number",["get","timestamp"]],a.getTime()]),n.state.map.setFilter("covid-point",["==",["number",["get","timestamp"]],a.getTime()]),n.updateVisibleCities(),n.props.onSelectedDateChanged&&n.props.onSelectedDateChanged(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleAnimateChange=function(e){n.setState({animate:e.target.checked},(function(){n.animatedStep()}))},n.setInteractive=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=t||n.state.map,r=["boxZoom","scrollZoom","dragPan","dragRotate","keyboard","doubleClickZoom","touchZoomRotate"],i=function(){r.forEach((function(e){o[e].enable()}))},s=function(){r.forEach((function(e){o[e].disable()}))};n.setState({isMapInteractive:e},(function(){e?i():s(),a&&a()}))};var r=new Date("2020-02-25");return n.baseUrl=S.BACKEND_URL,n.onSourceLoadBegin=n.props.onSourceLoadBegin,n.onSourceLoadFinished=n.props.onSourceLoadFinished,n.state={lng:e.lng||5,lat:e.lat||34,zoom:e.zoom||2,date:new Date,sliderValue:E(new Date("2020-02-25"),new Date),data:n.props.data,listableCities:[],animate:!1,initialDate:r,maxDays:E(r,new Date),mapType:"infected",loadState:"loading",isMapInteractive:!1,loadingText:"Carregando mapa do Brasil...",featuresLength:void 0},n}return Object(c.a)(a,[{key:"getHeatmapFeatures",value:function(){return this.state.map.queryRenderedFeatures({layers:["all-cities"]})}},{key:"processVisibleCities",value:function(e){if(!e||0===e.length)return[[],{}];var t={},a={};if(e){e=e.sort((function(e,t){return new Date(e.date)-new Date(t.date)})).map((function(e){return e.properties}));var n,o=Object(s.a)(e);try{for(o.s();!(n=o.n()).done;){var r=n.value,i=r.city;a.hasOwnProperty(r.date)||(a[r.date]=[]),!t.hasOwnProperty(i)&&r.timestamp<=this.state.date.getTime()&&(t[i]=r),a[r.date].push(r)}}catch(l){o.e(l)}finally{o.f()}return[Object.keys(t).map((function(e){return t[e]})),a]}return[[],{}]}},{key:"updateVisibleCities",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setInteractive(!1,this.state.map,(function(){setTimeout((function(){var a,n,o;e.setState({loadingText:"Obtendo cidades vis\xedveis..."});var r=e.getHeatmapFeatures();if(t||r.length<50||e.state.featuresLength!==r.length||e.state.animate){e.setState({loadingText:"Gerando dados para a lista de cidades e gr\xe1ficos...",featuresLength:r.length});var i=e.processVisibleCities(r);a=i[0],n=i[1],o=a.sort((function(e,t){return e.totalCases-t.totalCases})).reverse(),e.setState({listableCities:o}),e.props.onVisibleCitiesChange&&e.props.onVisibleCitiesChange(a,n),e.state.animate||setTimeout((function(){e.setInteractive(!0,e.state.map)}),30)}else e.state.animate||setTimeout((function(){e.setInteractive(!0,e.state.map)}),30)}),20)}))}},{key:"animatedStep",value:function(){var e=this;this.state.animate?(this.setInteractive(!1),k.NotificationManager.info("A intera\xe7\xe3o com o mapa ser\xe1 desetivada enquanto a anima\xe7\xe3o ocorrer.","Anima\xe7\xe3o ativada"),this.state.sliderValue>=this.state.maxDays&&(this.changeSlider(0),this.onSliderChangeEndedAsync(0)),this.animateTimeout=setInterval((function(){e.state.sliderValue<=e.state.maxDays?(e.changeSlider(e.state.sliderValue+1),e.onSliderChangeEndedAsync(e.state.sliderValue+1)):(e.changeSlider(0),e.onSliderChangeEndedAsync(0))}),4e3)):this.animateTimeout&&("loaded"===this.state.loadState&&this.setInteractive(!0),clearInterval(this.animateTimeout))}},{key:"changeSlider",value:function(e){var t=parseInt(e);this.setState({sliderValue:t,date:b(this.state.initialDate,t)})}},{key:"handleMapTypeChange",value:function(e){this.setState({mapType:e.target.value});var t="covid-heatmap-death",a="covid-heatmap";"infected"===e.target.value?(this.state.map.setLayoutProperty(a,"visibility","visible"),this.state.map.setLayoutProperty(t,"visibility","none")):(this.state.map.setLayoutProperty(a,"visibility","none"),this.state.map.setLayoutProperty(t,"visibility","visible"))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:this.props.containerStyle},o.a.createElement(x,{loading:!this.state.isMapInteractive&&!this.state.animate,style:this.props.style,text:this.state.loadingText}),o.a.createElement("div",{className:"console"},o.a.createElement("h1",{className:"consoleTitle"},"Mapa de calor: COVID-19 no Brasil"),o.a.createElement("label",null,o.a.createElement("span",{style:{fontSize:"1.1em"}}," At\xe9 o dia ",o.a.createElement("strong",null,D(this.state.date))," ",function(){var t=E(e.state.date,new Date);return 0===t?o.a.createElement("span",null,"(hoje)"):1===t?o.a.createElement("span",null,"(ontem)"):o.a.createElement("span",null,"(h\xe1 ",o.a.createElement("strong",null,t)," dias)")}()),o.a.createElement("input",{className:"slider row",type:"range",min:"0",max:this.state.maxDays,step:"1",value:this.state.sliderValue,onChange:function(t){return e.changeSlider(t.target.value)},onMouseUp:function(t){return e.onSliderChangeEndedAsync(t.target.value)}})),o.a.createElement("form",null,o.a.createElement("label",null,o.a.createElement("input",{name:"animate",type:"checkbox",checked:this.state.animate,onChange:this.handleAnimateChange}),"Animar")),o.a.createElement("form",null,o.a.createElement("label",null,o.a.createElement("input",{type:"radio",value:"infected",checked:"infected"===this.state.mapType,onChange:function(t){return e.handleMapTypeChange(t)}}),"Casos"),o.a.createElement("span",null," | "),o.a.createElement("label",null,o.a.createElement("input",{type:"radio",value:"death",checked:"death"===this.state.mapType,onChange:function(t){return e.handleMapTypeChange(t)}}),"\xd3bitos")),o.a.createElement("div",null),o.a.createElement("div",{className:"cityList"},this.state.listableCities.length>0?o.a.createElement(y.a,{itemRenderer:this.renderCityListItem,length:this.state.listableCities.length,type:"uniform",pageSize:3}):o.a.createElement("p",{style:{textAlign:"center",fontStyle:"italic"}},"(Use o zoom e a navega\xe7\xe3o pelo mapa para ver os detalhes de cada localidade.)")),o.a.createElement("div",{style:{color:"gray",fontSize:"0.5em",bottom:0,position:"absolute"}},o.a.createElement("p",null,o.a.createElement("span",null,o.a.createElement("strong",null,"Zoom: "),this.state.zoom),o.a.createElement("span",null," | "),o.a.createElement("span",null,o.a.createElement("strong",null,"Centro: "),this.state.lat,", ",this.state.lng)))),o.a.createElement("div",{style:this.props.style,ref:function(t){return e.mapContainer=t}}))}},{key:"componentDidMount",value:function(){var e=this;this.onSourceLoadBegin&&this.onSourceLoadBegin();var t=new v.a.Map({container:this.mapContainer,style:"mapbox://styles/aest/ck93dlpxn00v21imgp8zz3y6x?optimize=true",center:[this.state.lng,this.state.lat],zoom:this.state.zoom,minPitch:0,maxPitch:0,pitchWithRotate:!1,logoPosition:"bottom-right"});this.setState({map:t}),this.setInteractive(!1,t),t.on("move",(function(){e.setState({lng:t.getCenter().lng.toFixed(4),lat:t.getCenter().lat.toFixed(4),zoom:t.getZoom().toFixed(2)})})),t.once("idle",(function(){e.onSourceLoadFinished&&!e.state.animate&&e.onSourceLoadFinished(),"loading"===e.state.loadState&&e.setState({loadState:"loaded"},(function(){e.updateVisibleCities()}))})),t.on("moveend",(function(){e.setInteractive(!1,t,(function(){e.updateVisibleCities()}))})),t.on("zoomend",(function(){e.setInteractive(!1,t,(function(){e.updateVisibleCities()}))})),t.on("touchend",(function(){e.setInteractive(!1,t,(function(){e.updateVisibleCities()}))})),t.on("load",(function(){e.setState({loadingText:"Baixando dados das cidades e construindo mapa..."}),t.addSource("covid",{type:"geojson",data:"".concat(e.baseUrl,"/api/v1/br/cities.geojson")}),t.addSource("covid-cities-daily",{type:"geojson",data:"".concat(e.baseUrl,"/api/v1/br/cities-daily.geojson")}),t.addLayer({id:"covid-heatmap-death",type:"heatmap",source:"covid",visibility:"none",paint:{"heatmap-weight":["interpolate",["linear"],["number",["get","newDeaths"]],0,0,20,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(255,237,68,0)",.1,"#E75151",.2,"#D34848",.3,"#BF3F3F",.4,"#972D2D",.5,"#9e001f",.6,"#832424",.7,"#6F1B1B",.8,"#5B1212",.9,"#470909",1,"#330000"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,15,0]}},"waterway-label"),t.addLayer({id:"covid-heatmap",type:"heatmap",source:"covid",paint:{"heatmap-weight":["interpolate",["linear"],["number",["get","newCases"]],0,0,20,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0,0,0,0)",.1,"#007083",.2,"#009a94",.3,"#00c385",.4,"#fdfd25",.5,"#fdd525",.6,"#fd9f25",.7,"#fd6625",.8,"#e6441c",.9,"#E34519",1,"#c9240e"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,15,0]}},"waterway-label"),t.addLayer({id:"covid-point",type:"circle",source:"covid-cities-daily",minzoom:8,paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,["interpolate",["linear"],["number",["get","totalCases"]],1,1,6,4],16,["interpolate",["linear"],["number",["get","totalCases"]],1,5,6,50]],"circle-color":["interpolate",["linear"],["number",["get","totalCases"]],1,"rgba(33,102,172,0)",2,"rgb(178,24,43)"],"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":["interpolate",["linear"],["zoom"],7,0,8,1]}},"waterway-label"),t.addLayer({id:"all-cities",type:"circle",source:"covid",minzoom:2.8,paint:{"circle-color":"rgba(0,0,0,0)","circle-stroke-width":0}})}))}}]),a}(n.Component),T=a(286),I=function(e){var t=e.children,a=e.url,n=e.text,r=e.style,i=e.target,s=void 0===i?"_blank":i;return t?o.a.createElement("a",{href:a,style:r,target:s},t):n?o.a.createElement("a",{href:a,style:r,target:s},n):o.a.createElement("a",{href:a,style:r,target:s},a)};function N(){return o.a.createElement("div",{className:"footer"},o.a.createElement("strong",{style:{fontSize:"1.2em"}},"Importante:"),o.a.createElement("p",null,o.a.createElement("strong",null,"Este \xe9 apenas um experimento em visualiza\xe7\xe3o de dados.")),o.a.createElement("p",null,"N\xe3o sou especialista em visualiza\xe7\xe3o de dados nem em dissemina\xe7\xe3o de doen\xe7as, ent\xe3o n\xe3o confie nos dados deste site, \xe9 apenas uma tentativa de visualizar a dissemina\xe7\xe3o da doen\xe7a e pode (certamente n\xe3o) corresponder com a realdade."),o.a.createElement("p",null,"Ent\xe3o lembre-se de considerar que qualquer dado pode parecer mais ou menos alarmante dependendo da forma como \xe9 apresentado e que eu n\xe3o tenho a compet\xeancia necess\xe1ria para availiar isso de forma totalmente correta."),o.a.createElement("p",null,"Sugest\xf5es ou corre\xe7\xf5es podem ser enviadas pelo GitHub (link a seguir)."),o.a.createElement("hr",null),o.a.createElement("p",null,o.a.createElement("strong",null,"Meu perfil no GitHub:  "),o.a.createElement(I,{url:"https://github.com/ALREstevam"})),o.a.createElement("p",null,o.a.createElement("strong",null,"Reposit\xf3rios deste projeto no GitHub:  "),o.a.createElement(I,{url:"https://github.com/ALREstevam/covid19-br-vis-back"}),o.a.createElement("span",null," e "),o.a.createElement(I,{url:"https://github.com/ALREstevam/covid19-br-vis-back"}),o.a.createElement("span",null,".")))}var L=a(287);function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"string"===typeof e||e instanceof String?e:Number.isInteger(e)?e.toString():Number(e).toFixed(t).toString()}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=Number(e);return a>1e3?a.toLocaleString("pt-br"):F(a,t)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(null===e)return null;if(0===e)return"0";t=!t||t<0?0:t;var a=e.toPrecision(2).split("e"),n=1===a.length?0:Math.floor(Math.min(a[1].slice(1),14)/3),o=n<1?e.toFixed(0+t):(e/Math.pow(10,3*n)).toFixed(1+t),r=o<0?o:Math.abs(o),i=r+["","K","M","B","T"][n];return i}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=Number(e);return a>-20&&a<20?F(a,t):A(a,t)}var B=function(e){var t=0;return function(a){return(t+=1)%e===0?(t=0,a):""}}(7),R={axis:{textColor:"#eee",fontSize:10,tickColor:"#eee"},grid:{stroke:"#888",strokeWidth:1},pointLabel:{textColor:"#eee",fontSize:20},dots:{text:{fontSize:10}}},V={linear:function(e){return{type:"linear",min:0,max:"auto",stacked:e,reverse:!1}},linearZeroOne:function(e){return{type:"linear",min:0,max:1,stacked:e,reverse:!1}},linearMinusOnePlusOne:function(e){return{type:"linear",min:-1,max:1,stacked:e,reverse:!1}},log10:function(e){return{type:"log",base:10,max:"auto",stacked:e,reverse:!1}}},_=function(e){var t=e.node,a=e.data,n=0,r=Number.parseInt(t.point.id.split(".")[1]);r>0&&(n=a.filter((function(e){return e.id===t.point.serieId}))[0].data[r-1].y);var i=t.point.data.yFormatted-n,s=F(i);return s=i>=0?"+".concat(z(s)):"".concat(z(s)),o.a.createElement("div",{style:{color:t.point.serieColor,backgroundColor:"#fff",padding:"5px",border:"1px solid ".concat(t.point.borderColor),textAlign:"center",borderRadius:"5px",boxShadow:"5px 5px 10px -7px rgba(0,0,0,0.75)"}},o.a.createElement("strong",{style:{fontSize:".9em"}},t.point.data.xFormatted),o.a.createElement("br",null),o.a.createElement("span",null,t.point.serieId,": ",o.a.createElement("strong",null,z(t.point.data.yFormatted)),o.a.createElement("br",null),o.a.createElement("span",null," (",s,")")))},G=function(e){var t=e.data,a=e.colors,n=void 0===a?{scheme:"set3"}:a,r=e.stacked,i=void 0!==r&&r,s=e.yScaleType,l=void 0===s?"linear":s;return o.a.createElement(L.a,{data:t,margin:{top:50,right:120,bottom:100,left:90},tooltip:function(e){return o.a.createElement(_,{node:e,data:t})},xScale:{type:"time",format:"%Y-%m-%dT%H:%M:%S"},yScale:V[l](i),xFormat:"time:%m/%d",theme:R,curve:"natural",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"Tempo",legendOffset:36,legendPosition:"middle",format:"%d/%m"},axisLeft:{legend:"Pessoas",orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legendOffset:-40,legendPosition:"middle",format:function(e){return j(e,2)}},colors:n,pointSize:3,pointBorderWidth:3,pointColor:{theme:"background"},pointBorderColor:{from:"serieColor"},enablePointLabel:!0,pointLabel:function(e){return B(j(e.y,4))},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-left",direction:"row",justify:!1,translateX:0,translateY:90,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})},q=(a(292),function(){function e(){Object(l.a)(this,e),this.processedData=void 0,this.rawData=void 0,this.untilDate=void 0,this.filteredIndexes=void 0,this.casesPlotData=void 0,this.casesGrowthFactorPlotData=void 0,this.deathsPlotData=void 0,this.deathsGrowthRateData=void 0,this.deathsOverCasesData=void 0,this.newCasesData=void 0,this.newDeathsData=void 0,this.casesDeathsPerStateAndCityData=void 0}return Object(c.a)(e,[{key:"makeDataset",value:function(e,t){return this.rawData=e,this.untilDate=t,this.filteredIndexes=Object.keys(e).filter((function(e){return t.setHours(0,0,0,0)>new Date(e).setHours(0,0,0,0)})).sort((function(e,t){return new Date(e)-new Date(t)})),this.processedData=this.filteredIndexes.map((function(t){return e[t].reduce((function(e,a){return{date:t,deaths:e.deaths+a.deaths,newCases:e.newCases+a.newCases,newDeaths:e.newDeaths+a.newDeaths,totalCases:e.totalCases+a.totalCases}}),{date:void 0,deaths:0,newCases:0,newDeaths:0,totalCases:0})})),this.processedData}},{key:"yGrowthFactor",value:function(e){var t,a=[],n=[],o=Object(s.a)(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(n.push(r),2===n.length){var i=0===n[0].y?0:n[1].y/n[0].y-1;a.push({x:r.x,y:i}),n=[r]}}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"generateNewCasesPlotData",value:function(){return this.newCasesData={id:"# novos casos / dia",color:"#61cdbb",data:this.processedData.map((function(e){return{x:e.date,y:e.newCases}}))}}},{key:"generateNewDeathsPlotData",value:function(){return this.newDeathsData={id:"# novos \xf3bitos / dia",color:"#61cdbb",data:this.processedData.map((function(e){return{x:e.date,y:e.newDeaths}}))}}},{key:"generateCasesPlotData",value:function(){return this.casesPlotData={id:"Casos",color:"#61cdbb",data:this.processedData.map((function(e){return{x:e.date,y:e.totalCases}}))}}},{key:"generateDeathsPlotData",value:function(){return this.deathsPlotData={id:"\xd3bitos",color:"#f47560",data:this.processedData.map((function(e){return{x:e.date,y:e.deaths}}))}}},{key:"generateCasesGrowthFactorPlotData",value:function(){var e=this.casesPlotData&&this.casesPlotData.data.length>0?this.casesPlotData:this.generateCasesPlotData();return this.casesGrowthFactorPlotData={id:"GR casos",color:"#f47560",data:this.yGrowthFactor(e.data)}}},{key:"generateDeathsGrowthFactorPlotData",value:function(){var e=this.deathsPlotData&&this.deathsPlotData.data.length>0?this.deathsPlotData:this.generateDeathsPlotData();return this.deathsGrowthRateData={id:"GR \xf3bitos",color:"#f47560",data:this.yGrowthFactor(e.data)}}},{key:"generateDeathsOverCases",value:function(){for(var e=this.deathsPlotData&&this.deathsPlotData.data.length>0?this.deathsPlotData:this.generateDeathsPlotData(),t=this.casesPlotData&&this.casesPlotData.data.length>0?this.casesPlotData:this.generateCasesPlotData(),a=e.data.map((function(e){return e.x})),n=t.data.map((function(e){return e.x})),o=a.filter((function(e){return n.includes(e)})),r=e.data.filter((function(e){return e.y>0&&o.includes(e.x)})),i=t.data.filter((function(e){return e.y>0&&o.includes(e.x)})),s=[],l=0;l<r.length;l++){var c=r[l],d=i[l];c.y>0&&d.y>0&&s.push({x:c.x,y:d.y/c.y})}return this.deathsOverCasesData={id:"casos/\xf3bitos",color:"#f47560",data:s}}},{key:"generateChartData",value:function(){return{deaths:this.deathsPlotData&&this.deathsPlotData.data.length>0?this.deathsPlotData:this.generateDeathsPlotData(),cases:this.casesPlotData&&this.casesPlotData.data.length>0?this.casesPlotData:this.generateCasesPlotData(),casesGrowthFactor:this.casesGrowthFactorPlotData&&this.casesGrowthFactorPlotData.data.length>0?this.casesGrowthFactorPlotData:this.generateCasesGrowthFactorPlotData(),deathGrowthFactor:this.deathsGrowthRateData&&this.deathsGrowthRateData.data.length>0?this.deathsGrowthRateData:this.generateDeathsGrowthFactorPlotData(),deathsOverCases:this.deathsOverCasesData&&this.deathsOverCasesData.data.length>0?this.deathsOverCasesData:this.generateDeathsOverCases(),newCases:this.newCasesData&&this.newCasesData.data.length>0?this.newCasesData:this.generateNewCasesPlotData(),newDeaths:this.newDeathsData&&this.newDeathsData.data.length>0?this.newDeathsData:this.generateNewDeathsPlotData(),casesDeathsPerLocation:this.generateCasesDeathsPerStateAndCity()}}},{key:"generateCasesDeathsPerStateAndCity",value:function(){var e=this,t={},a={},n=this.filteredIndexes.map((function(t){return e.rawData[t]}));if(!n||0===n.length)return{perState:{},perCity:{}};var o,r=n[n.length-1],i=Object(s.a)(r);try{for(i.s();!(o=i.n()).done;){var l=o.value;t.hasOwnProperty(l.state)?t[l.state]={state:l.state,deaths:l.deaths+t[l.state].deaths,cases:l.totalCases+t[l.state].cases}:t[l.state]={state:l.state,deaths:l.deaths,cases:l.totalCases},a.hasOwnProperty(l.city)?t[l.city]={city:l.city,deaths:l.deaths+t[l.city].deaths,cases:l.totalCases+t[l.city].cases}:t[l.city]={city:l.city,deaths:l.deaths,cases:l.totalCases}}}catch(c){i.e(c)}finally{i.f()}return{perState:Object.keys(t).map((function(e){return t[e]})),perCity:Object.keys(t).map((function(e){return t[e]}))}}},{key:"removeZeroes",value:function(e){return Object(O.a)({},e,{},{data:e.data.filter((function(e){return e.y>0}))})}},{key:"makeTitle",value:function(){var e=this.rawData;if(0===Object.keys(e).length)return"COVID-19 em ...";var t=e[Object.keys(e)[0]],a=Array.from(new Set(t.map((function(e){return e.state}))));if(a.length>=25)return"COVID-19 em todo o Brasil";if(t.length>40){var n=a.slice(0,3);return a.length-3>1?"COVID-19 em parte de "+n.join(", ")+" e outros "+(a.length-3)+" estados":a.length-3===1?"COVID-19 em parte de "+n.join(", ")+" e outro estado":3===n.length?"COVID-19 em "+n.join(", "):2===n.length?"COVID-19 em "+n.join(" e "):"COVID-19 em "+n[0]}var o=t.map((function(e){return e.city})).filter((function(e){return"CASO SEM LOCALIZA\xc7\xc3O DEFINIDA"!==e})),r=o.slice(0,3);return o.length-3>1?"COVID-19 em "+r.join(", ")+" e outras "+(o.length-3)+" cidades":o.length-3===1?"COVID-19 em "+r.join(", ")+" e outra cidade":3===r.length?"COVID-19 em "+r.join(", "):2===r.length?"COVID-19 em "+r.join(" e "):"COVID-19 em "+r[0]}}]),e}()),X=function(){return o.a.createElement("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},o.a.createElement("mstyle",{displaystyle:"true"},o.a.createElement("mrow",{className:"MJX-TeXAtom-ORD"},o.a.createElement("mi",null,"g"),o.a.createElement("mi",null,"r"),o.a.createElement("mo",null,"="),o.a.createElement("mfrac",null,o.a.createElement("mrow",null,o.a.createElement("mi",null,"v"),o.a.createElement("mi",null,"a"),o.a.createElement("mi",null,"l"),o.a.createElement("mi",null,"o"),o.a.createElement("msub",null,o.a.createElement("mi",null,"r"),o.a.createElement("mrow",{className:"MJX-TeXAtom-ORD"},o.a.createElement("mi",null,"d"),o.a.createElement("mi",null,"i"),o.a.createElement("mi",null,"a")))),o.a.createElement("mrow",null,o.a.createElement("mi",null,"v"),o.a.createElement("mi",null,"a"),o.a.createElement("mi",null,"l"),o.a.createElement("mi",null,"o"),o.a.createElement("msub",null,o.a.createElement("mi",null,"r"),o.a.createElement("mrow",{className:"MJX-TeXAtom-ORD"},o.a.createElement("mi",null,"d"),o.a.createElement("mi",null,"i"),o.a.createElement("mi",null,"a"),o.a.createElement("mo",null,"\u2212"),o.a.createElement("mn",null,"1"))))),o.a.createElement("mo",null,"\u2212"),o.a.createElement("mn",null,"1"))))},H=function(){return o.a.createElement("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},o.a.createElement("mstyle",{displaystyle:"true"},o.a.createElement("mrow",{className:"MJX-TeXAtom-ORD"},o.a.createElement("mi",null,"g"),o.a.createElement("mi",null,"r"))))},U=function(){return o.a.createElement("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},o.a.createElement("mstyle",{displaystyle:"true"},o.a.createElement("mrow",{className:"MJX-TeXAtom-ORD"},o.a.createElement("mi",null,"g"),o.a.createElement("mi",null,"r"),o.a.createElement("mo",null,">"),o.a.createElement("mn",null,"0"))))},W=function(){return o.a.createElement("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},o.a.createElement("mstyle",{displaystyle:"true"},o.a.createElement("mrow",{className:"MJX-TeXAtom-ORD"},o.a.createElement("mi",null,"g"),o.a.createElement("mi",null,"r"),o.a.createElement("mo",null,"<"),o.a.createElement("mn",null,"0"))))},J=function(){return o.a.createElement("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},o.a.createElement("mstyle",{displaystyle:"true"},o.a.createElement("mrow",{className:"MJX-TeXAtom-ORD"},o.a.createElement("mi",null,"g"),o.a.createElement("mi",null,"r"),o.a.createElement("mo",null,"\u2248"),o.a.createElement("mn",null,"0"))))},Z={aboutSite:{presentation:o.a.createElement("p",null,"Este site cont\xe9m um conjunto de experimentos de visualiza\xe7\xe3o de dados sobre o COVID-19 nos munic\xedpios brasileiros. os dados foram extra\xeddos de ",o.a.createElement("a",{href:"https://covid19br.wcota.me/"},"https://covid19br.wcota.me/")," e ent\xe3o processados no formato GEOJSON, adequado para a constru\xe7\xe3o de mapas interativos. Mais informa\xe7\xf5es no rodap\xe9."),youCanDo:o.a.createElement("p",null,"Navegue pelo mapa e use o zoom para selecionar uma regi\xe3o espec\xedfica. Os gr\xe1ficos abaixo se adequar\xe3o para mostrar os dados das regio\u1ebds vis\xedveis no mapa.")},growthFactor:{mainExplanation:[o.a.createElement("p",{key:"gr1"},"O ",o.a.createElement("strong",null,"Fator de Crescimento")," (ou ",o.a.createElement("em",null,"Growth Factor"),") reflete o crescimento percentual di\xe1rio no n\xfamero de casos e \xf3bitos computados:"),o.a.createElement("p",{key:"gr2"},"Este valor \xe9 calculado com a seguinte f\xf3rmula: ",o.a.createElement(X,null)),o.a.createElement("p",{key:"gr3"},"De forma especifica, o valor do ",o.a.createElement(H,null)," indica que o n\xfamero de novos casos ou \xf3bitos em um determinado dia pode ser obtido pela multiplica\xe7\xe3o da devida quantidade no dia anterior por ",o.a.createElement(H,null),".")],parameters:o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(U,null),": quantidade casos ou \xf3bitos aumentando, quanto maior o valor, maior o crescimento di\xe1rio."),o.a.createElement("li",null,o.a.createElement(W,null),": quantidade casos ou \xf3bitos diminuindo, quanto menor o valor, maior \xe9 a diminui\xe7\xe3o na quantidade em compara\xe7\xe3o com o dia anterior."),o.a.createElement("li",null,o.a.createElement(J,null),": a quantidade de casos ou \xf3bitos est\xe1 est\xe1vel, houve redu\xe7\xe3o ou pequeno aumento entre os dias.")),about:[o.a.createElement("p",{key:"aboutgr1"},"O fator de crescimento \xe9 uma importante m\xe9trica na avalia\xe7\xe3o da dissemina\xe7\xe3o da doen\xe7a e ocorr\xeancia de mortes, mas \xe9 totalmente dependente da testagem em massa da popula\xe7\xe3o e da confirma\xe7\xe3o da causa dos \xf3bitos onde h\xe1 suspeita de COVID-19, assim, um aumento ou diminui\xe7\xe3o neste fator pode revelar tanto mudan\xe7as na quantidade real quanto no n\xfamero de testes."),o.a.createElement("p",{key:"aboutgr2"},"\xc9 importante notar tamb\xe9m que: nas primeiras semanas da infec\xe7\xe3o a quantidade de pacientes \xe9 muito pequena para termos valores concisos, assim, h\xe1 uma grande flutua\xe7\xe3o num primeiro momento e com o tempo temos uma medida mais realista."),o.a.createElement("p",{key:"aboutgr3"},"De forma geral, espera-se que este valor mantenha-se acima de zero enquanto a doen\xe7a estiver se alastrando, que se mantenha muito pr\xf3xima ao zero quando o plat\xf4 da infec\xe7\xe3o for atingido e que fique abaixo de zero durante sua redu\xe7\xe3o.")]},specialChars:{pointUp:"\u02c4",pointDown:"\u02c5"},dataSource:{mainText:o.a.createElement("p",null,"Fonte de dados para o mapa e os gr\xe1ficos:",o.a.createElement("a",{href:"https://covid19br.wcota.me/"},"N\xfamero de casos confirmados de COVID-19 no Brasil"))}},K=function(e){var t;t=(window.pageYOffset||document.documentElement.scrollTop)+e,document.documentElement.scrollTop=document.body.scrollTop=t},Y=function(){return o.a.createElement("div",{className:"scrollButtons"},o.a.createElement("div",{className:"scrollButton",onClick:function(){K(-500)}},o.a.createElement("span",null,Z.specialChars.pointUp)),o.a.createElement("div",{className:"scrollButton",onClick:function(){K(500)}},o.a.createElement("span",null,Z.specialChars.pointDown)))},Q=function(e){var t=e.title,a=e.data,n=e.colors,r=e.stacked,i=void 0===r||r,s=e.className,l=void 0===s?"almostFullPage":s,c=e.yScaleType,d=void 0===c?"linear":c;if(void 0!==a)return o.a.createElement("div",null,o.a.createElement("h3",null,t),o.a.createElement("div",{className:l},o.a.createElement(G,{data:a,colors:n,stacked:i,yScaleType:d})));console.error("LinePlotWrapper received undefined as data to plot",t)},$=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).complete=function(){n.setState({loadingBarProgress:100}),n.clearIntervals()},n.onMapLoadedHandler=function(){n.complete()},n.onLoaderFinished=function(){n.setState({loadingBarProgress:0})},n.infiniteLoad=function(){n.setState({loadingBarProgress:n.state.loadingBarProgress+Math.round(5+5*Math.random())}),n.timers.push(setInterval((function(){n.setState({loadingBarProgress:n.state.loadingBarProgress+Math.round(5*Math.random())})}),1200))},n.updatePlots=function(e,t){n.plotData.makeDataset(t,n.state.selectedDate),n.setState({visibleCitiesPerDate:t,perDayChartData:n.plotData.generateChartData(),perDateChartName:n.plotData.makeTitle()})},n.selectedDateChangedHandler=function(e){n.plotData.makeDataset(n.state.visibleCitiesPerDate,e),n.setState({selectedDate:e,perDayChartData:n.plotData.generateChartData(),perDateChartName:n.plotData.makeTitle()})},n.onMapUpdatingHandler=function(e){n.setState({loading:e})},n.timers=[],n.plotData=new q,n.plotData.makeDataset({},new Date),n.state={covidCasesGeoJson:void 0,covidCasesJson:void 0,loadingBarProgress:0,visibleCitiesPerDate:{},selectedDate:new Date,perDayChartData:n.plotData.generateChartData(),perDateChartName:"COVID-19 em todo o Brasil..."},n}return Object(c.a)(a,[{key:"clearIntervals",value:function(){var e,t=Object(s.a)(this.timers);try{for(t.s();!(e=t.n()).done;){var a=e.value;clearInterval(a)}}catch(n){t.e(n)}finally{t.f()}}},{key:"add",value:function(e){this.setState({loadingBarProgress:this.state.loadingBarProgress+e})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(T.a,{progress:this.state.loadingBarProgress,height:3,color:"red",onLoaderFinished:this.onLoaderFinished}),o.a.createElement(Y,null),o.a.createElement(M,{style:{right:0,left:0,height:"95vh",width:"100%",maxHeight:"1000px"},data:this.state.covidCasesGeoJson,zoom:3,lat:-13.5958,lng:-54.4587,onSourceLoadBegin:this.infiniteLoad,onSourceLoadFinished:this.onMapLoadedHandler,onVisibleCitiesChange:this.updatePlots,onSelectedDateChanged:this.selectedDateChangedHandler}),o.a.createElement("div",{className:"nivoCharts"},o.a.createElement("h2",null,this.state.perDateChartName),Z.aboutSite.presentation,Z.aboutSite.youCanDo,o.a.createElement(Q,{title:"Casos e \xf3bitos",data:[this.state.perDayChartData.deaths,this.state.perDayChartData.cases],colors:["#fa4343","#0068d2"],stacked:!0}),o.a.createElement(Q,{title:"\xd3bitos",data:[this.state.perDayChartData.deaths],colors:["#fa4343"]}),o.a.createElement(Q,{title:"Casos e \xf3bitos em escala logar\xedtmica",data:[this.plotData.removeZeroes(this.state.perDayChartData.deaths),this.plotData.removeZeroes(this.state.perDayChartData.cases)],colors:["#fa4343","#0068d2"],stacked:!0,yScaleType:"log10"}),o.a.createElement(Q,{title:"Casos sobre \xf3bitos",data:[this.state.perDayChartData.deathsOverCases],colors:["#e8a838"]}),o.a.createElement("h2",null,"Novos casos e \xf3bitos"),o.a.createElement(Q,{title:"Novos casos por dia",data:[this.state.perDayChartData.newCases],colors:["#3841e8"]}),o.a.createElement(Q,{title:"Novos \xf3bitos por dia",data:[this.state.perDayChartData.newDeaths],colors:["#e85e38"]}),o.a.createElement("h2",null,"Fator de crescimento"),Z.growthFactor.mainExplanation,Z.growthFactor.parameters,Z.growthFactor.about,o.a.createElement(Q,{title:"Fator de crescimento - casos",data:[this.plotData.casesGrowthFactorPlotData],colors:["#00d3eb"]}),o.a.createElement(Q,{title:"Fator de crescimento - \xf3bitos",data:[this.plotData.deathsGrowthRateData],colors:["#ff6a7f"]}),o.a.createElement(Q,{title:"Fator de crescimento - casos e \xf3bitos",data:[this.plotData.deathsGrowthRateData,this.plotData.casesGrowthFactorPlotData],colors:["#ff6a7f","#00d3eb"],yScaleType:"linearMinusOnePlusOne"})),o.a.createElement("div",{style:{marginLeft:50,marginRight:50}},o.a.createElement("hr",null),Z.dataSource.mainText),o.a.createElement(N,null))}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.clearIntervals()}}]),a}(n.Component);a(496);var ee=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(k.NotificationContainer,null),o.a.createElement($,null))},te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ee,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/covid19-br-vis-front",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/covid19-br-vis-front","/service-worker.js");te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ae(t,e)}))}}()}},[[329,1,2]]]);
//# sourceMappingURL=main.bb84851e.chunk.js.map