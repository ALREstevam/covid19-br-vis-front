{"version":3,"sources":["common/date.js","components/CityDataItem.js","env/envVars.js","components/MapBox.js","components/Link.js","components/Footer.js","components/LinePlot.js","common/toNivoDataConverter.js","components/MainPage.js","App.js","serviceWorker.js","index.js"],"names":["daysBetween","d0","d1","Math","round","abs","formatDate","date","month","getMonth","day","getDate","year","getFullYear","length","join","addDays","days","dt","Date","valueOf","setDate","styles","lastUpdate","color","fontSize","cityName","dataValue","CityDataItem","name","state","cases","deaths","className","style","require","env","MAPBOX_ACCESS_TOKEN","process","BACKEND_URL","MAPBOX_ACCESS_TOKEN_LIST","str","sep","split","read_list","mapboxgl","accessToken","MapBox","props","renderCityListItem","index","key","data","renderableCities","city","totalCases","onSliderChangeEndedAsync","value","a","initialDate","parseInt","map","setFilter","getTime","updateVisibleCities","onSelectedDateChanged","handleAnimateChange","event","setState","animate","target","checked","animatedStep","baseUrl","onSourceLoadBegin","onSourceLoadFinished","lng","lat","zoom","sliderValue","visibleCities","maxDays","mapType","loadState","isMapInteractive","features","this","queryRenderedFeatures","layers","cityData","perDate","sort","b","feature","properties","hasOwnProperty","timestamp","push","Object","keys","getVisibleOnMap","visibleCitiesPerDate","reverse","onVisibleCitiesChange","setInteractive","NotificationManager","info","changeSlider","animateTimeout","setInterval","clearInterval","dayNum","newDate","setLayoutProperty","containerStyle","daysAgo","type","min","max","step","onChange","e","onMouseUp","handleMapTypeChange","itemRenderer","pageSize","textAlign","fontStyle","bottom","position","ref","el","mapContainer","isInteractive","mapObj","boxZoom","enable","scrollZoom","dragPan","dragRotate","keyboard","doubleClickZoom","touchZoomRotate","disable","Map","container","center","minPitch","maxPitch","pitchWithRotate","logoPosition","on","getCenter","toFixed","getZoom","addSource","addLayer","Component","SimpleLink","children","url","text","href","Footer","formatNumber","num","decimalPlaces","String","Number","isInteger","toString","showSometimes","n","current","showEvery","LinePLot","colors","scheme","stacked","margin","top","right","left","tooltip","node","lasty","point","id","filter","serieId","y","lastDiff","yFormatted","lastDiffStr","serieColor","backgroundColor","padding","border","borderColor","borderRadius","boxShadow","xFormatted","xScale","format","xFormat","yFormat","curve","yScale","axisTop","axisRight","axisBottom","orient","tickSize","tickPadding","tickRotation","legend","legendOffset","legendPosition","axisLeft","pointSize","pointColor","theme","pointBorderWidth","pointBorderColor","from","enablePointLabel","pointLabel","pointLabelYOffset","useMesh","legends","anchor","direction","justify","translateX","translateY","itemsSpacing","itemDirection","itemWidth","itemHeight","itemOpacity","symbolSize","symbolShape","symbolBorderColor","effects","itemBackground","PerDateNivoDataset","constructDataset","untilDate","setHours","reduce","sum","newCases","newDeaths","undefined","x","yGrowthFactor","array","growthFactor","pair","casesGrowthFactor","deathGrowthFactor","perDate2NivoChartTitle","defaultTitle","states","Array","Set","showStates","slice","cities","showCities","ScrollButtons","onClick","document","documentElement","scrollTop","body","window","pageYOffset","GrowthFactorMessage","MainPage","complete","loadingBarProgress","clearIntervals","onMapLoadedHandler","updatePlots","onLoaderFinished","infiniteLoad","random","timers","visibleCitiesChangeHandler","perDayChartData","nivoDataset","selectedDate","perDateChartName","selectedDateChangedHandler","covidCasesGeoJson","covidCasesJson","timer","progress","height","width","LinePlot","marginLeft","marginRight","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.bc9d67f4.chunk.js","sourcesContent":["export const ONE_DAY = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds\n\nexport function daysBetween(d0, d1) {\n    return Math.round(Math.abs((d0 - d1) / ONE_DAY));\n}\n\nexport function formatDate(date) {\n    let month = '' + (date.getMonth() + 1)\n    let day = '' + date.getDate()\n    let year = date.getFullYear()\n\n    if (month.length < 2) {\n        month = '0' + month;\n    }\n    if (day.length < 2) {\n        day = '0' + day;\n    }\n\n    return [day, month, year].join('/');\n}\n\nexport function addDays(date, days) {\n    var dt = new Date(date.valueOf());\n    dt.setDate(dt.getDate() + days);\n    return dt;\n}\n\nexport function toTimestamp(strDate){\n    var datum = Date.parse(strDate);\n    return datum/1000;\n }","import React from 'react';\nimport { formatDate } from '../common/date'\n\nconst CityDataItem = ({ name, state, date, cases, deaths }) => {\n    return (\n        <div className='cityListItem'>\n            <span style={styles.lastUpdate}>Última atualização {formatDate(date)}</span><br />\n            <span style={styles.cityName}><b>{name}/{state}</b></span><br />\n            <span style={styles.dataValue}><b>Casos:</b> {cases}</span>\n            <span> | </span>\n            <span style={styles.dataValue}><b>Óbitos:</b> {deaths}</span>\n        </div>)\n};\n\nconst styles = {\n    lastUpdate: {\n        color: '#949494',\n        fontSize: '.6em'\n    },\n    cityName: {\n        fontSize: '1em'\n    },\n    dataValue: {\n        color: '#3b3b3b',\n        fontSize: '.9em'\n    }\n}\n\nexport default CityDataItem","require('dotenv/config');\n\nexport function read_list(str, sep=','){\n    if(str){\n        return str.split(sep)\n    }\n}\n\n\nconst env = {\n    MAPBOX_ACCESS_TOKEN : process.env.REACT_APP_MAPBOX_ACCESS_TOKEN,\n    BACKEND_URL: process.env.REACT_APP_BACKEND_URL || 'http://localhost:3000',\n    MAPBOX_ACCESS_TOKEN_LIST: read_list(process.env.MAPBOX_ACCESS_TOKEN_LIST),\n}\n\n\n\n\nexport default env","import React, { Component } from 'react';\nimport mapboxgl from 'mapbox-gl'\nimport ReactList from 'react-list'\nimport { formatDate, daysBetween, addDays } from '../common/date'\nimport CityDataItem from './CityDataItem'\nimport env from '../env/envVars'\n//import Lock from './Lock'\nimport {NotificationManager} from 'react-notifications';\n\nmapboxgl.accessToken = env.MAPBOX_ACCESS_TOKEN\n\nclass MapBox extends Component {\n    constructor(props) {\n        super(props);\n\n        let initialDate = new Date('2020-02-25')\n\n        this.baseUrl = env.BACKEND_URL\n\n        this.onSourceLoadBegin = this.props.onSourceLoadBegin\n        this.onSourceLoadFinished = this.props.onSourceLoadFinished\n\n        this.state = {\n            lng: props.lng || 5,\n            lat: props.lat || 34,\n            zoom: props.zoom || 2,\n            date: new Date(),\n            sliderValue: daysBetween(new Date('2020-02-25'), new Date()),\n            data: this.props.data,\n            visibleCities: [],\n            renderableCities: [],\n            animate: false,\n            initialDate: initialDate,\n            maxDays: daysBetween(initialDate, new Date()),\n            mapType: 'infected',\n            loadState: 'loading',\n            isMapInteractive: true,\n        };\n    }\n\n\n    renderCityListItem = (index, key) => {\n        const data = this.state.renderableCities[index]\n        return <CityDataItem name={data.city} state={data.state} date={new Date(data.date)} \n        cases={data.totalCases} deaths={data.deaths} key={key}/>\n    }\n\n    getVisibleOnMap() {\n        let features = this.state.map.queryRenderedFeatures({ layers: ['all-cities'] });\n        let cityData = {}\n        let perDate = {}\n        if (features) {\n            features = features.sort((a, b) => new Date(a.date) - new Date(b.date))\n                .map(feature => feature.properties)\n\n            for (let feature of features) {\n                let city = feature.city\n                if (!perDate.hasOwnProperty(feature.date)) perDate[feature.date] = []\n                if (!cityData.hasOwnProperty(city) && feature.timestamp <= this.state.date.getTime()) cityData[city] = feature\n                perDate[feature.date].push(feature)\n            }\n            return [Object.keys(cityData).map(key => cityData[key]), perDate];\n        }\n        return [[], []]\n    }\n\n    updateVisibleCities() {\n        let cityData, perDate\n        [cityData, perDate] = this.getVisibleOnMap()\n\n        this.setState({\n            visibleCities: cityData,\n            visibleCitiesPerDate: perDate,\n            renderableCities: cityData.sort((a, b) => a.totalCases - b.totalCases).reverse()\n        })\n\n        this.props.onVisibleCitiesChange &&\n            this.state.loadState === 'loaded' &&\n            this.props.onVisibleCitiesChange(cityData, perDate)\n    }\n\n    animatedStep() {\n        if (this.state.animate) {\n            this.setInteractive(false)\n            NotificationManager.info(\"A interação com o mapa será desetivada enquanto a animação ocorrer.\", \"Animação ativada\")\n            \n            if (this.state.sliderValue >= this.state.maxDays) {\n                this.changeSlider(0)\n                this.onSliderChangeEndedAsync(0)\n            }\n\n            this.animateTimeout = setInterval(() => {\n                if (this.state.sliderValue <= this.state.maxDays) {\n                    this.changeSlider(this.state.sliderValue + 1)\n                    this.onSliderChangeEndedAsync(this.state.sliderValue + 1)\n                }\n                else {\n                    this.changeSlider(0)\n                    this.onSliderChangeEndedAsync(0)\n                }\n            }, 4000);\n        }\n        else if (this.animateTimeout) {\n            this.state.loadState === 'loaded' && this.setInteractive(true)\n            clearInterval(this.animateTimeout);\n        }\n\n    }\n\n    changeSlider(value) {\n        let dayNum = parseInt(value)\n        let newDate = addDays(this.state.initialDate, dayNum)\n\n        this.setState({\n            sliderValue: dayNum,\n            date: newDate,\n        })\n    }\n\n    onSliderChangeEndedAsync = async (value) => {\n        let date = addDays(this.state.initialDate, parseInt(value))\n        this.state.map.setFilter('covid-heatmap', ['<=', ['number', ['get', 'timestamp']], date.getTime()])\n        this.state.map.setFilter('covid-heatmap-death', ['<=', ['number', ['get', 'timestamp']], date.getTime()])\n        this.state.map.setFilter('covid-point', ['==', ['number', ['get', 'timestamp']], date.getTime()])\n        this.updateVisibleCities()\n        this.props.onSelectedDateChanged && this.props.onSelectedDateChanged(date)\n    }\n\n    handleMapTypeChange(event) {\n        this.setState({\n            mapType: event.target.value\n        })\n\n        let layers = {\n            death: 'covid-heatmap-death',\n            infected: 'covid-heatmap'\n        }\n\n        if (event.target.value === 'infected') {\n            this.state.map.setLayoutProperty(layers.infected, 'visibility', 'visible')\n            this.state.map.setLayoutProperty(layers.death, 'visibility', 'none')\n        } else {\n            this.state.map.setLayoutProperty(layers.infected, 'visibility', 'none')\n            this.state.map.setLayoutProperty(layers.death, 'visibility', 'visible')\n        }\n    }\n\n    handleAnimateChange = (event) => {\n        this.setState({ animate: event.target.checked }, () => {\n            this.animatedStep()\n        })\n    }\n\n    render() {\n        const daysAgo = () => {\n            let daysAgo = daysBetween(this.state.date, new Date())\n            if (daysAgo === 0) {\n                return <span>(hoje)</span>\n            }\n            if (daysAgo === 1) {\n                return (<span>(ontem)</span>)\n            }\n            else {\n                return (<span>(há <strong>{daysAgo}</strong> dias)</span>)\n            }\n        }\n\n        return (\n            <div style={this.props.containerStyle}>\n                <div className='console'>\n                    <h1 className='consoleTitle'>Mapa de calor: COVID-19 no Brasil</h1>\n                    <div className='session sliderbar'>\n                        <label>\n                            <span style={{fontSize: '1.1em'}}> Até o dia <strong>{formatDate(this.state.date)}</strong> {daysAgo()}</span>\n                            <input className='slider row' type='range' min='0' max={this.state.maxDays} step='1' value={this.state.sliderValue} \n                            onChange={(e) => this.changeSlider(e.target.value)} \n                            onMouseUp={(e)=>this.onSliderChangeEndedAsync(e.target.value)}/>\n                        </label>\n                        <form>\n                            <label>\n                                <input name=\"animate\" type=\"checkbox\" checked={this.state.animate} onChange={this.handleAnimateChange} />\n                                Animar\n                        </label>\n                        </form>\n                    </div>\n                    <form>\n                        <label>\n                            <input type=\"radio\" value=\"infected\" checked={this.state.mapType === 'infected'}\n                                onChange={(e) => this.handleMapTypeChange(e)} />\n                            Casos\n                       </label>\n                        <span> | </span>\n                        <label>\n                            <input type=\"radio\" value=\"death\" checked={this.state.mapType === 'death'}\n                                onChange={(e) => this.handleMapTypeChange(e)} />\n                            Óbitos\n                      </label>\n                    </form>\n                    <div>\n\n                    </div>\n                    <div>\n                        <div className='cityList'>\n                            {(this.state.renderableCities.length > 0) ? (<ReactList\n                                itemRenderer={/*::*/this.renderCityListItem}\n                                length={this.state.renderableCities.length}\n                                type='uniform'\n                                pageSize={3}\n                            />)\n                                :\n                                (<p style={{ textAlign: 'center', fontStyle: 'italic' }}>\n                                    (Use o zoom e a navegação pelo mapa para ver os detalhes de cada localidade.)</p>)}\n                        </div>\n                    </div>\n                    <div style={{ color: 'gray', fontSize: '0.5em', bottom: 0, position: 'absolute' }}>\n                        <p>\n                            <span><strong>Zoom: </strong>{this.state.zoom}</span>\n                            <span> | </span>\n                            <span><strong>Centro: </strong>{this.state.lat}, {this.state.lng}</span>\n                            <span> | </span>\n                            <span><strong>Cidades visíveis: </strong>{this.state.visibleCities.length}</span>\n                        </p>\n                    </div>\n                </div>\n                {/*<div style={{position: 'absolute', top: 10, right:10, zIndex: 999}}>\n                    <Lock title='lock' textOnLocked=\"locked\" textOnUnlocked='unlocked' locked={this.state.isMapInteractive}/>\n                </div>*/}\n                <div style={this.props.style} ref={el => this.mapContainer = el} />\n            </div>\n        )\n    }\n\n    setInteractive(isInteractive, mapObj) {\n        let map = mapObj || this.state.map\n        if (isInteractive) {\n            map.boxZoom.enable();\n            map.scrollZoom.enable();\n            map.dragPan.enable();\n            map.dragRotate.enable();\n            map.keyboard.enable();\n            map.doubleClickZoom.enable();\n            map.touchZoomRotate.enable();\n        } else {\n            map.boxZoom.disable();\n            map.scrollZoom.disable();\n            map.dragPan.disable();\n            map.dragRotate.disable();\n            map.keyboard.disable();\n            map.doubleClickZoom.disable();\n            map.touchZoomRotate.disable();\n        }\n        this.setState({\n            isMapInteractive: isInteractive\n        })\n    }\n\n    componentDidMount() {\n        this.onSourceLoadBegin && this.onSourceLoadBegin()\n\n        const map = new mapboxgl.Map({\n            container: this.mapContainer,\n            style: 'mapbox://styles/aest/ck93dlpxn00v21imgp8zz3y6x?optimize=true',\n            center: [this.state.lng, this.state.lat],\n            zoom: this.state.zoom,\n            minPitch: 0,\n            maxPitch: 0,\n            pitchWithRotate: false,\n            logoPosition: 'bottom-right',\n        })\n\n        this.setState({\n            map: map\n        })\n\n        this.setInteractive(false, map)\n\n        map.on('move', () => {\n            this.setState({\n                lng: map.getCenter().lng.toFixed(4),\n                lat: map.getCenter().lat.toFixed(4),\n                zoom: map.getZoom().toFixed(2)\n            });\n        });\n\n        map.on('load', () => {\n\n            map.addSource('covid', {\n                'type': 'geojson',\n                'data': `${this.baseUrl}/api/v1/br/cities.geojson`\n            })\n\n            map.addSource('covid-cities-daily', {\n                'type': 'geojson',\n                'data': `${this.baseUrl}/api/v1/br/cities-daily.geojson`\n            })\n\n            map.on('moveend', () => {\n                this.updateVisibleCities()\n            });\n\n            map.addLayer({\n                'id': 'covid-heatmap-death',\n                'type': 'heatmap',\n                'source': 'covid',\n                'visibility': 'none',\n                'paint': {\n                    // Increase the heatmap weight based on frequency and property magnitude\n                    'heatmap-weight': [\n                        'interpolate', ['linear'], ['number', ['get', 'newDeaths']], 0, 0, 20, 1\n                    ],\n                    // Increase the heatmap color weight weight by zoom level\n                    // heatmap-intensity is a multiplier on top of heatmap-weight\n                    'heatmap-intensity': [\n                        'interpolate', ['linear'], ['zoom'], 0, 1, 9, 3\n                    ],\n                    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n                    // Begin color ramp at 0-stop with a 0-transparancy color\n                    // to create a blur-like effect.\n                    'heatmap-color': [\n                        'interpolate', ['linear'], ['heatmap-density'],\n                        0, 'rgba(255,237,68,0)',\n                        0.1, '#E75151',\n                        0.2, '#D34848',\n                        0.3, '#BF3F3F',\n                        0.4, '#972D2D',\n                        0.5, '#9e001f',\n                        0.6, '#832424',\n                        0.7, '#6F1B1B',\n                        0.8, '#5B1212',\n                        0.9, '#470909',\n                        1, '#330000',\n                    ],\n                    // Adjust the heatmap radius by zoom level\n                    'heatmap-radius': [\n                        'interpolate', ['linear'], ['zoom'], 0, 2, 9, 20\n                    ],\n                    // Transition from heatmap to circle layer by zoom level\n                    'heatmap-opacity': ['interpolate', ['linear'], ['zoom'], 7, 1, 15, 0]\n                },\n                //filter: ['<=', ['number', ['get', 'timestamp']], this.state.date]\n            },\n                'waterway-label'\n            );\n\n            map.addLayer({\n                'id': 'covid-heatmap',\n                'type': 'heatmap',\n                'source': 'covid',\n                'paint': {\n                    // Increase the heatmap weight based on frequency and property magnitude\n                    'heatmap-weight': [\n                        'interpolate', ['linear'], ['number', ['get', 'newCases']], 0, 0, 20, 1\n                    ],\n                    // Increase the heatmap color weight weight by zoom level\n                    // heatmap-intensity is a multiplier on top of heatmap-weight\n                    'heatmap-intensity': [\n                        'interpolate', ['linear'], ['zoom'], 0, 1, 9, 3\n                    ],\n                    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n                    // Begin color ramp at 0-stop with a 0-transparancy color\n                    // to create a blur-like effect.\n                    'heatmap-color': [\n                        'interpolate', ['linear'], ['heatmap-density'],\n                        0, 'rgba(0,0,0,0)',\n                        0.1, '#007083',\n                        0.2, '#009a94',\n                        0.3, '#00c385',\n                        0.4, '#fdfd25',\n                        0.5, '#fdd525',\n                        0.6, '#fd9f25',\n                        0.7, '#fd6625',\n                        0.8, '#e6441c',\n                        0.9, '#E34519',\n                        1, '#c9240e'\n                    ],\n                    // Adjust the heatmap radius by zoom level\n                    'heatmap-radius': [\n                        'interpolate', ['linear'], ['zoom'], 0, 2, 9, 20\n                    ],\n                    // Transition from heatmap to circle layer by zoom level\n                    'heatmap-opacity': ['interpolate', ['linear'], ['zoom'], 7, 1, 15, 0]\n                },\n                //filter: ['<=', ['number', ['get', 'timestamp']], this.state.date]\n            },\n                'waterway-label'\n            );\n\n\n            map.addLayer({\n                'id': 'covid-point',\n                'type': 'circle',\n                'source': 'covid-cities-daily',\n                'minzoom': 8,\n                'paint': {\n                    // Size circle radius by earthquake magnitude and zoom level\n                    'circle-radius': [\n                        'interpolate', ['linear'], ['zoom'],\n                        7,\n                        ['interpolate', ['linear'], ['number', ['get', 'totalCases']], 1, 1, 6, 4],\n                        16,\n                        ['interpolate', ['linear'], ['number', ['get', 'totalCases']], 1, 5, 6, 50]\n                    ],\n                    // Color circle by earthquake magnitude\n                    'circle-color': [\n                        'interpolate', ['linear'], ['number', ['get', 'totalCases']],\n                        1, 'rgba(33,102,172,0)', 2, 'rgb(178,24,43)'\n                    ],\n                    'circle-stroke-color': 'white', 'circle-stroke-width': 1,\n                    'circle-opacity': ['interpolate', ['linear'], ['zoom'], 7, 0, 8, 1]\n                },\n                //filter: ['==', ['number', ['get', 'timestamp']], this.state.date],\n            },\n                'waterway-label'\n            );\n\n            map.addLayer({\n                'id': 'all-cities',\n                'type': 'circle',\n                'source': 'covid',\n                'minzoom': 2.8,\n                'paint': {\n                    'circle-color': 'rgba(0,0,0,0)',\n                    'circle-stroke-width': 0,\n                },\n            },\n            );\n\n        });\n\n        map.on('idle', () => {\n            this.onSourceLoadFinished && !this.state.animate && this.onSourceLoadFinished()\n\n            if (this.state.loadState === 'loading') {\n                this.setState({\n                    loadState: 'loaded'\n                })\n                this.setInteractive(true, map)\n                this.updateVisibleCities()\n            }\n        })\n    }\n}\n\n\n\nexport default MapBox;","import React from 'react'\n\nconst SimpleLink = ({ children, url, text, style, target='_blank'}) => {\n\n    if(children){\n        return (\n            <a href={url} style={style} target={target}>\n                {children}\n            </a>\n        )\n    }\n    if(text){\n        return (<a href={url} style={style} target={target}>{text}</a>)\n    }\n    return <a href={url} style={style} target={target}>{url}</a>\n}\nexport default SimpleLink","import React from 'react'\nimport SimpleLink from './Link'\n\nexport default function Footer() {\n    return (\n        <div className='footer'>\n\n            <strong style={{'fontSize': '1.2em'}}>Importante:</strong>\n\n            <p>\n            <strong>Este é apenas um experimento em visualização de dados.</strong>\n            </p>\n\n            <p>Não sou especialista em visualização de dados nem em disseminação de doenças, então\n            não confie nos dados deste site, é apenas uma tentativa de visualizar a disseminação\n            da doença e pode (certamente não) corresponder com a realdade.</p>\n            \n            <p>\n            Então lembre-se de considerar que qualquer dado pode parecer mais ou menos alarmante \n            dependendo da forma como é apresentado e que eu não tenho a competência necessária\n            para availiar isso de forma totalmente correta.\n            </p>\n\n            <p>\n            Sugestões ou correções podem ser enviadas pelo GitHub (link a seguir).\n            </p>\n\n            <hr/>\n\n            <p>\n                <strong>Meu perfil no GitHub:  </strong>\n\n                <SimpleLink url='https://github.com/ALREstevam' />\n            </p>\n            \n            <p>\n                <strong>Repositórios deste projeto no GitHub:  </strong>\n                <SimpleLink url='https://github.com/ALREstevam/covid19-br-vis-back'/>\n                <span> e </span>\n                <SimpleLink url='https://github.com/ALREstevam/covid19-br-vis-back'/>\n                <span>.</span>\n            </p>\n            \n        </div>\n    )\n}\n","import React from 'react'\nimport { ResponsiveLine } from '@nivo/line'\n\n\nfunction formatNumber(num, decimalPlaces = 2) {\n    if (typeof num === 'string' || num instanceof String) {\n        return num\n    }\n    if (Number.isInteger(num)) {\n        return num.toString()\n    }\n    else {\n        return Number(num).toFixed(decimalPlaces).toString()\n    }\n}\n\nfunction showEvery(n) {\n    let current = 0\n    return (value) => {\n        current += 1\n        if (current % n === 0) {\n            current = 0\n            return value\n        } else {\n            return ''\n        }\n    }\n}\n\nconst showSometimes = showEvery(3)\n\n\nconst LinePLot = ({ data, colors = { scheme: 'set3' }, stacked = false }) => {\n    return (<ResponsiveLine\n        data={data}\n        margin={{ top: 50, right: 120, bottom: 100, left: 90 }}\n        tooltip={(node) => {\n            let last = undefined\n            let lasty = 0\n\n            let index = Number.parseInt(node.point.id.split('.')[1])\n            if(index > 0){\n                last = data.filter(data => data.id === node.point.serieId)[0].data[index-1]\n                lasty = last.y\n            }\n            \n            let lastDiff = node.point.data.yFormatted - lasty\n            let lastDiffStr = formatNumber(lastDiff)\n            lastDiffStr = lastDiff >= 0 ? `+${lastDiffStr}` : `${lastDiffStr}`   \n            \n\n            return (\n                <div style={{\n                    color: node.point.serieColor,\n                    backgroundColor: '#fff',\n                    padding: '5px',\n                    border: `1px solid ${node.point.borderColor}`,\n                    textAlign: 'center',\n                    borderRadius: '5px',\n                    boxShadow: '5px 5px 10px -7px rgba(0,0,0,0.75)'\n                }}>\n                    <strong style={{ fontSize: '.9em' }}>{node.point.data.xFormatted}</strong><br />\n                    <span>{node.point.serieId}: <strong>{node.point.data.yFormatted}</strong>\n                    <br/>\n                    <span> ({lastDiffStr})</span>\n                    </span>\n                </div>\n            )\n        }}\n        xScale={{\n            type: 'time', //point, time, linear\n            //min: 0,\n            //max: 'auto',\n            format: \"%Y-%m-%dT%H:%M:%S\",\n            //precision: \"hour\",\n            //2020-02-25T00:00:00\n        }}\n        xFormat=\"time:%m/%d\"\n        yFormat={formatNumber}\n        curve=\"natural\"\n        yScale={{ type: 'linear', min: 0, max: 'auto', stacked: stacked, reverse: false }}\n        axisTop={null}\n        axisRight={null}\n        axisBottom={{\n            orient: 'bottom',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'Tempo',\n            legendOffset: 36,\n            legendPosition: 'middle',\n            format: '%d/%m',\n        }}\n        axisLeft={{\n            legend: 'Pessoas',\n            orient: 'left',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legendOffset: -40,\n            legendPosition: 'middle'\n        }}\n        colors={colors}\n        pointSize={10}\n        pointColor={{ theme: 'background' }}\n        pointBorderWidth={2}\n        pointBorderColor={{ from: 'serieColor' }}\n        enablePointLabel={true}\n        pointLabel={e => showSometimes(formatNumber(e.y, 4))}\n        pointLabelYOffset={-12}\n        useMesh={true}\n        legends={[\n            {\n                anchor: 'bottom-left',\n                direction: 'row',\n                justify: false,\n                translateX: 0,\n                translateY: 90,\n                itemsSpacing: 0,\n                itemDirection: 'left-to-right',\n                itemWidth: 80,\n                itemHeight: 20,\n                itemOpacity: 0.75,\n                symbolSize: 12,\n                symbolShape: 'circle',\n                symbolBorderColor: 'rgba(0, 0, 0, .5)',\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemBackground: 'rgba(0, 0, 0, .03)',\n                            itemOpacity: 1\n                        }\n                    }\n                ]\n            }\n        ]}\n    />)\n}\n\n\nexport default LinePLot","export class PerDateNivoDataset {\n\n    constructDataset = (visibleCitiesPerDate, untilDate) => {\n\n        let data = Object.keys(visibleCitiesPerDate)\n            .filter(dt => (untilDate.setHours(0,0,0,0) > (new Date(dt).setHours(0,0,0,0))) )\n            .sort((a, b) => (new Date(a)) - (new Date(b)))\n            .map(key => visibleCitiesPerDate[key]\n                .reduce(\n                (sum, city) => {\n                    return {\n                        date: key,\n                        deaths: sum.deaths + city.deaths,\n                        newCases: sum.newCases + city.newCases,\n                        newDeaths: sum.newDeaths + city.newDeaths,\n                        totalCases: sum.totalCases + city.totalCases,\n                    }\n                }, {\n                    date: undefined,\n                    deaths: 0,\n                    newCases: 0,\n                    newDeaths: 0,\n                    totalCases: 0,\n                })\n            )\n\n        let cases = {\n            \"id\": \"Casos\",\n            \"color\": \"#61cdbb\",\n            \"data\": data.map(day => {\n                return {\n                    x: day.date,\n                    y: day.totalCases,\n                }\n            })\n        }\n\n        let deaths = {\n            \"id\": \"Óbitos\",\n            \"color\": \"#f47560\",\n            \"data\": data.map(day => {\n                return {\n                    x: day.date,\n                    y: day.deaths,\n                }\n            })\n        }\n\n        function yGrowthFactor(array) {\n            let growthFactor = []\n            let pair = [ /*yesterday, today*/ ]\n\n            for (let el of array) {\n                pair.push(el)\n                if (pair.length === 2) {\n                    let y = pair[0].y === 0 ? 1 : pair[1].y / pair[0].y\n\n                    growthFactor.push({\n                        x: el.x,\n                        y: y,\n                    })\n                    pair = [el] //today becomes yesterday\n                }\n            }\n            return growthFactor\n        }\n\n\n        let casesGrowthFactor = {\n            \"id\": \"GR casos\",\n            \"color\": \"#f47560\",\n            \"data\": yGrowthFactor(cases.data)\n        }\n\n        let deathGrowthFactor = {\n            \"id\": \"GR óbitos\",\n            \"color\": \"#f47560\",\n            \"data\": yGrowthFactor(deaths.data)\n        }\n\n        return {\n            deaths: deaths,\n            cases: cases,\n            casesGrowthFactor: casesGrowthFactor,\n            deathGrowthFactor: deathGrowthFactor,\n        }\n    }\n\n\n}\n\n\n\n\n\n\nexport const perDate2NivoChartTitle = (visibleCitiesPerDate, defaultTitle) => {\n\n    if (Object.keys(visibleCitiesPerDate).length === 0) {\n        return defaultTitle\n    }\n\n    let data = visibleCitiesPerDate[Object.keys(visibleCitiesPerDate)[0]]\n\n    let states = Array.from(new Set(data.map(city => city.state)))\n\n    if (data.length > 350 || states.length >= 25) {\n        return 'todo o Brasil'\n    }\n\n    if (data.length > 40) {\n        let showStates = states.slice(0, 3)\n\n        if (states.length - 3 > 1) {\n            return 'parte de ' + showStates.join(', ') + ' e outros ' + (states.length - 3) + ' estados'\n        }\n        if (states.length - 3 === 1) {\n            return 'parte de ' + showStates.join(', ') + ' e outro estado'\n        } else {\n            if (showStates.length === 3) {\n                return showStates.join(', ')\n            }\n            if (showStates.length === 2) {\n                return showStates.join(' e ')\n            } else {\n                return showStates[0]\n            }\n        }\n    } else {\n        let cities = data.map(city => city.city).filter(city => city !== 'CASO SEM LOCALIZAÇÃO DEFINIDA')\n        let showCities = cities.slice(0, 3)\n\n        if (cities.length - 3 > 1) {\n            return showCities.join(', ') + ' e outras ' + (cities.length - 3) + ' cidades'\n        }\n        if (cities.length - 3 === 1) {\n            return showCities.join(', ') + ' e outra cidade'\n        } else {\n            if (showCities.length === 3) {\n                return showCities.join(', ')\n            }\n            if (showCities.length === 2) {\n                return showCities.join(' e ')\n            } else {\n                return showCities[0]\n            }\n        }\n    }\n\n\n}","import React, { Component } from 'react';\n//import { getCitiesBrJson } from '../requests/covid'\nimport MapBox from './MapBox'\n//import MyResponsiveLine from './LogPlot'\nimport LoadingBar from 'react-top-loading-bar';\nimport Footer from './Footer'\nimport LinePlot from './LinePlot'\nimport { PerDateNivoDataset, perDate2NivoChartTitle } from '../common/toNivoDataConverter'\n\n\nconst ScrollButtons = () => (\n    <div className='scrollButtons'>\n        <div className='scrollButton' onClick={()=>{\n            document.documentElement.scrollTop = document.body.scrollTop = ((window.pageYOffset || document.documentElement.scrollTop)-500);\n        }}><span>˄</span></div>\n        <div className='scrollButton' onClick={()=>{\n            document.documentElement.scrollTop = document.body.scrollTop = ((window.pageYOffset || document.documentElement.scrollTop)+500);\n        }}><span>˅</span></div>\n    </div>\n)\n\nconst GrowthFactorMessage = () => (\n\n    <div className='nivoCharts'>\n        <h3>Fator de crescimento</h3>\n        <p>\n            O <strong>Fator de Crescimento</strong> (ou <em>Growth Factor</em>) é calculado pela divisão <code>ValorDia/ValorDiaAnterior</code> e reflete\n            o crescimento diário no número de casos e óbitos computados:\n                        </p>\n\n        <ul>\n            <li><code>Fator de Crescimento<strong> &gt; </strong>0</code>: o valor referido aumentou desde o último dia</li>\n            <li><code>Fator de Crescimento<strong> &lt; </strong>0</code>: o valor referido diminuiu desde o último dia</li>\n            <li><code>Fator de Crescimento<strong> ≈ </strong>0</code>: o valor referido não mudou significativamente desde o último dia</li>\n        </ul>\n\n        <p>\n            O fator de crescimento é uma importante métrica na avaliação da disseminação da doença e ocorrência de mortes, mas\n            é totalmente dependente da testagem em massa da população e da confirmação da causa dos óbitos onde há suspeita de COVID-19,\n            assim, um aumento ou diminuição neste fator pode ocorrer caso a quantidade de testes realizados mude e não somente\n            se a quantidade de pessoas infectadas ou óbitos confirmados se alterar.\n                    </p>\n    </div>\n)\n\nclass MainPage extends Component {\n\n    constructor(props) {\n        super(props)\n        this.nivoDataset = new PerDateNivoDataset()\n        this.timers = []\n\n        this.state = {\n            covidCasesGeoJson: undefined,\n            covidCasesJson: undefined,\n            loadingBarProgress: 0,\n            visibleCities: [],\n            visibleCitiesPerDate: {},\n            selectedDate: new Date(),\n            perDayChartData: this.nivoDataset.constructDataset({}, new Date()),\n            perDateChartName: 'COVID-19 em todo o Brasil'\n        }\n    }\n\n    clearIntervals() {\n        for (let timer of this.timers) {\n            clearInterval(timer)\n        }\n    }\n\n    add(value) {\n        this.setState({\n            loadingBarProgress: this.state.loadingBarProgress + value\n        })\n    }\n\n    complete = () => {\n        this.setState({ loadingBarProgress: 100 })\n        this.clearIntervals()\n    }\n\n    onMapLoadedHandler = () => {\n        this.complete()\n        this.updatePlots()\n    }\n\n    onLoaderFinished = () => {\n        this.setState({ loadingBarProgress: 0 })\n    }\n\n    infiniteLoad = () => {\n        this.setState({\n            loadingBarProgress: this.state.loadingBarProgress + Math.round(5 + Math.random() * 5)\n        })\n\n        this.timers.push(setInterval(\n            () => {\n                this.setState({\n                    loadingBarProgress: this.state.loadingBarProgress + Math.round(Math.random() * 5)\n                })\n            },\n            1200\n        ))\n\n    }\n\n    visibleCitiesChangeHandler = async (visibleCities, visibleCitiesPerDate) => {\n        this.setState({\n            visibleCities: visibleCities,\n            visibleCitiesPerDate: visibleCitiesPerDate,\n        })\n        this.updatePlots()\n    }\n\n    updatePlots = async () => {\n        this.setState({\n            perDayChartData: this.nivoDataset.constructDataset(this.state.visibleCitiesPerDate, this.state.selectedDate),\n            perDateChartName: 'COVID-19 em ' + perDate2NivoChartTitle(this.state.visibleCitiesPerDate, \"todo o Brasil\")\n        })\n    }\n\n    selectedDateChangedHandler = (date) => {\n        this.setState({ selectedDate: date })\n    }\n\n    render() {\n        return (\n            <div>\n                <LoadingBar\n                    progress={this.state.loadingBarProgress}\n                    height={3}\n                    color='red'\n                    onLoaderFinished={this.onLoaderFinished}\n                />\n                <ScrollButtons/>\n                \n                <MapBox style={{ right: 0, left: 0, height: '95vh', width: '100%' }}\n                    data={this.state.covidCasesGeoJson}\n                    zoom={3} lat={-13.5958} lng={-54.4587}\n                    onSourceLoadBegin={this.infiniteLoad}\n                    onSourceLoadFinished={this.onMapLoadedHandler}\n                    onVisibleCitiesChange={this.visibleCitiesChangeHandler}\n                    onSelectedDateChanged={this.selectedDateChangedHandler}\n                />\n                <div className='nivoCharts'>\n                    <h2>{this.state.perDateChartName}</h2>\n                    <h3>Casos e óbitos</h3>\n                    <div style={{ width: '100%', height: '80vh' }}>\n                        <LinePlot\n                            data={[this.state.perDayChartData.deaths, this.state.perDayChartData.cases]}\n                            colors={['#fa4343', '#0068d2']} \n                            stacked={true}/>\n                    </div>\n                    <h3>Óbitos</h3>\n                    <div style={{ width: '100%', height: '50vh', }}>\n                        <LinePlot data={[this.state.perDayChartData.deaths]} \n                            colors={['#fa4343']} />\n                    </div>\n\n                    <GrowthFactorMessage />\n\n                    <div style={{ width: '100%', height: '80vh', }}>\n                        <LinePlot data={[this.state.perDayChartData.casesGrowthFactor]}\n                        colors={['#00d3eb']}/>\n                    </div>\n                    <div style={{ width: '100%', height: '80vh', }}>\n                        <LinePlot data={[this.state.perDayChartData.deathGrowthFactor]} \n                        colors={['#ff6a7f']}/>\n                    </div>\n                    {/*<div style={{ width: '100%', height: '100vh', backgroundColor: 'red' }}>\n                    <MyResponsiveLine />\n                </div>*/}\n                </div>\n                <div style={{marginLeft: 50, marginRight: 50}}>\n                    <hr/>\n                    <p>Fonte de dados para o mapa e os gráficos: <a href='https://covid19br.wcota.me/'>Número de casos confirmados de COVID-19 no Brasil</a></p>\n                </div>\n                <Footer />\n            </div>\n        );\n    }\n\n    componentDidMount() {\n    }\n\n    componentWillUnmount() {\n        this.clearIntervals()\n    }\n}\n\nexport default MainPage;\n","import React from 'react';\nimport './App.css';\nimport MainPage from './components/MainPage'\nimport {NotificationContainer} from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <NotificationContainer>\n      </NotificationContainer>\n        <MainPage />\n    </div>\n    \n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}